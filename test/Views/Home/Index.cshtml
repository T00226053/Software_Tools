@model CreateOrder;
@using test.Controllers;
@{
    ViewData["Title"] = "Home Page";
}
<link rel="stylesheet" type="text/css" href="css/site.css">

<div class="sellables-container">
    <div class="sellables">
        <div class="categories">
            <a class="category active" href="#">Beverages</a>
            <a class="category" href="#">Non-Alcoholic</a>
            <a class="category" href="#">Lunch Menu</a>
            <a class="category" href="#">Dinner Menu</a>
            <a class="category" href="#">Bar Snacks</a>
            <a class="category" href="#">Deals</a>
            <!-- Other categories -->
        </div>
        <div class="item-group-wrapper">
            <div class="item">
                
                    
                    
                    
                
            </div>
        </div>
    </div>
</div>
<div class="register-wrapper">
    <div class="customer">
        <input type="text" placeholder="Customer" />
    </div>
    <div class="register">
        <div class="products">
            <!-- Added items are here-->
        </div>


        <div class="pay-button">
            <a href="#">Create Order</a>
        </div>
        <div id="total-price">Total: €0.00</div>
    </div>
</div>

<!-- Rest of your HTML -->
<!-- Rest of your HTML -->

<script>
    // Code
    const productsDiv = document.querySelector(".products");
    const createOrderButton = document.querySelector(".pay-button a");

    // Initializing the total price
    let totalPrice = 0;

    // Initialize an error message flag
    let errorMessageDisplayed = false;

    // Adding a click event handler to the "Create Order" button
    createOrderButton.addEventListener("click", (event) => {
        event.preventDefault();

        // Check if there are selected items
        if (totalPrice > 0) {
            // Create order successfully
            displaySuccessMessage("Order created successfully!");
        } else if (!errorMessageDisplayed) {
            // Handle error when no items are selected and no error message has been displayed
            displayErrorMessage("No items selected for the order.");
            errorMessageDisplayed = true; // Set the flag to true to indicate that an error message has been displayed
        }
    });

    const itemButtons = document.querySelectorAll(".item");
    itemButtons.forEach((button) => {
        button.addEventListener("click", (event) => {
            event.preventDefault();

            const itemName = button.getAttribute("data-item");
            const itemPrice = parseFloat(button.getAttribute("data-price")); // Get the price as a floating-point number

            const selectedProduct = document.createElement("div");
            selectedProduct.className = "product-bar selected";
            selectedProduct.innerHTML = `
                            <span>${itemName}</span>
                            <span>€${itemPrice.toFixed(2)}</span>
                        `;

            productsDiv.appendChild(selectedProduct);

            // Updating the total price
            totalPrice += itemPrice;
            updateTotalPrice();
        });
    });

    // Function to update the total price
    function updateTotalPrice() {
        const totalElement = document.querySelector("#total-price");
        totalElement.textContent = `Total: €${totalPrice.toFixed(2)}`;
    }

    // Function to display a success message
    function displaySuccessMessage(message) {
        const successMessage = document.createElement("div");
        successMessage.className = "success-message";
        successMessage.textContent = message;
        createOrderButton.parentNode.appendChild(successMessage);
        setTimeout(() => {
            successMessage.remove();
        }, 3000);
    }

    // Function to display an error message
    function displayErrorMessage(message) {
        const errorMessage = document.createElement("div");
        errorMessage.className = "error-message";
        errorMessage.textContent = message;
        createOrderButton.parentNode.appendChild(errorMessage);
        setTimeout(() => {
            errorMessage.remove();
            errorMessageDisplayed = false; 
        }, 3000);
    }
</script>


